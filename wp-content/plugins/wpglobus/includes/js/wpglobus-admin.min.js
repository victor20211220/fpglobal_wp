var WPGlobusCore,WPGlobusDialogApp;!function(i){var d=WPGlobusCore={strpos:function(t,a,e){e=(t=""+t).indexOf(a,e);return 0<=e&&e},TextFilter:function(t,a,e){if(void 0===t||""===t)return t;var o,n,i=[],l=!1;a=""==a?"en":a,e=void 0===e||""==e?"RETURN_IN_DEFAULT_LANGUAGE":e,i[0]=[],i[0].start=WPGlobusCoreData.locale_tag_start.replace("%s",a),i[0].end=WPGlobusCoreData.locale_tag_end,i[1]=[],i[1].start="\x3c!--:"+a+"--\x3e",i[1].end="\x3c!--:--\x3e",i[2]=[],i[2].start="[:"+a+"]",i[2].end="[:";for(var s=0;s<3;s++)if(!1!==(o=d.strpos(t,i[s].start))){o+=i[s].start.length,t=!1===(n=d.strpos(t,i[s].end,o))?t.substr(o):t.substr(o,n-o),l=!0;break}return l||("RETURN_EMPTY"==e?a==WPGlobusCoreData.default_language&&!/(\{:|\[:|<!--:)[a-z]{2}/.test(t)||(t=""):a==WPGlobusCoreData.default_language?/(\{:|\[:|<!--:)[a-z]{2}/.test(t)&&(t=""):t=d.TextFilter(t,WPGlobusCoreData.default_language)),t},addLocaleMarks:function(t,a){return WPGlobusCoreData.locale_tag_start.replace("%s",a)+t+WPGlobusCoreData.locale_tag_end},getTranslations:function(e){var o,n={};return i.each(WPGlobusCoreData.enabled_languages,function(t,a){o=a==WPGlobusCoreData.default_language?"RETURN_IN_DEFAULT_LANGUAGE":"RETURN_EMPTY",n[a]=d.TextFilter(e,a,o)}),n},getString:function(t,a,e){if(void 0===t)return t;void 0===a&&(a=""),void 0===e&&(e=WPGlobusCoreData.language),(t=d.getTranslations(t))[e]=a;var o="";return i.each(t,function(t,a){""!=a&&t!=WPGlobusCoreData.default_language&&(o+=d.addLocaleMarks(a,t))}),o=""!=t[WPGlobusCoreData.default_language]?""==o?t[WPGlobusCoreData.default_language]:d.addLocaleMarks(t[WPGlobusCoreData.default_language],WPGlobusCoreData.default_language)+o:o}}}(jQuery),function(c){var g=WPGlobusDialogApp={option:{listenClass:".wpglobus_dialog_start",settingsClass:".wpglobus_dialog_settings",dialogTabs:"#wpglobus-dialog-tabs",dialogTitle:"",customData:null,callback:function(){}},form:void 0,element:void 0,element_by:"id",id:"",clone_id:"",wpglobus_id:"",type:"textarea",source:"",order:{},value:{},request:"core",attrs:{},dialogTitle:"",trClass:"wpglobus-translatable",startButton:['<span id="wpglobus-dialog-start-{{clone_id}}" ','style="{{style}}" ','data-type="control" data-dialog-title="{{title}}" ','data-source-type="" data-source-id="{{id}}" data-source-name="{{name}}" ','data-nodename="{{nodename}}"',"{{sbTitle}} ",'class="{{classes}}"></span>'].join(""),startButtonClass:"wpglobus_dialog_start wpglobus_dialog_icon",clicks:0,init:function(t){g.option=c.extend(g.option,t),c(g.option.dialogTabs).tabs(),g.dialogTitle=g.option.dialogTitle,this.attachListener(),null!=g.option.customData&&void 0!==g.option.customData.addElements&&c.each(g.option.customData.addElements,function(t,a){g.addElement(a)})},convertToId:function(t){return t=(t=t.replace(/\]/g,"")).replace(/\[/g,"-")},addElement:function(t){var a={id:null,dialogTitle:"",style:"",styleTextareaWrapper:"",sbTitle:"",onChangeClass:""};if("string"==typeof t)a.id=t;else{if("object"!=typeof t)return;a=c.extend(a,t)}var e,o,n,i=null,l=null,s=null,d=null,u=g.startButton,r="";g.element_by="id",null===(d=document.getElementById(a.id))?(g.element_by="name",d=document.getElementsByName(a.id)):r=(r=d.nodeName).toLowerCase(),0!=d.length&&(l=a.id,s="undefined"===(i="id"==g.element_by?c("#"+l):(r=(r=d[0].nodeName).toLowerCase(),c(r+'[name="'+l+'"]'))).attr("name")?l:i.attr("name"),g.clone_id=g.convertToId(l),-1==s.indexOf("wpglobus")&&-1==g.clone_id.indexOf("wpglobus")&&(0<c("#wpglobus-"+g.clone_id).length||0<c(r+'[name="wpglobus-'+s+'"]').length||(t=c(i.clone()),d=i.attr("style")||"",i.attr("style","display:none;"),t.attr("id","wpglobus-"+g.clone_id).attr("name","wpglobus-"+s),t.addClass(g.trClass),""!=a.onChangeClass&&t.addClass(a.onChangeClass),("id"==g.element_by?t.attr("data-source-id",l).attr("data-source-name",""):t.attr("data-source-id","").attr("data-source-name",s)).attr("data-source-get-by",g.element_by),"textarea"==r?(e=WPGlobusCore.getTranslations(i.text())[WPGlobusCoreData.language],t.text(e),t.attr("data-nodename","textarea"),""==a.style?t.attr("style",d+";width:95%;float:left;"):t.attr("style",d+";"+a.style)):(e=WPGlobusCore.getTranslations(i.val())[WPGlobusCoreData.language],t.attr("value",e),t.attr("data-nodename","input"),""!=a.style&&t.attr("style",d+";"+a.style)),u=u.replace(/{{clone_id}}/g,g.clone_id),u="id"==g.element_by?(u=(u=u.replace(/{{id}}/g,g.clone_id)).replace(/{{name}}/g,"")).replace(/{{nodename}}/g,""):(u=(u=u.replace(/{{id}}/g,"")).replace(/{{name}}/g,s)).replace(/{{nodename}}/g,r),u="textarea"==r?u.replace("{{style}}","float:left;margin-top:0;"):u.replace("{{style}}",""),s="textarea"==r?g.startButtonClass+" wpglobus-textarea wpglobus-textarea-"+g.clone_id:g.startButtonClass,u=u.replace("{{classes}}",s),u=""==a.dialogTitle?u.replace("{{title}}",g.dialogTitle):u.replace("{{title}}",a.dialogTitle),u=""==a.sbTitle?u.replace("{{sbTitle}}",a.sbTitle):u.replace("{{sbTitle}}",'title="'+a.sbTitle+'"'),c(u).insertAfter(i),c(t).insertAfter(i),"textarea"==r&&(c("#wpglobus-"+g.clone_id).addClass("wpglobus-textarea-"+g.clone_id),c(".wpglobus-textarea-"+g.clone_id).wrapAll('<div class="wpglobus-textarea-wrapper" style="'+a.styleTextareaWrapper+'"></div>')),o=!1,""==a.onChangeClass?n="#wpglobus-"+g.clone_id:(n="."+a.onChangeClass,void 0===(a=c._data(c(document)[0],"events"))?o=!0:void 0!==a.change&&c.each(a.change,function(t,a){if(a.selector==n)return!(o=!0)})),o||c(document).on("change",n,function(){var t=c(this),a=""==(a=t.data("source-id"))?t.data("nodename")+'[name="'+t.data("source-name")+'"]':"#"+a;c(a).val(WPGlobusCore.getString(c(a).val(),t.val()))}))))},saveDialog:function(){var e,o,n="",i="",l="";c(".wpglobus_dialog_textarea").each(function(t,a){o=c(a),e=o.val(),(o=o.data("language"))==WPGlobusAdmin.data.language&&(l=e),""!=e&&(n+=WPGlobusCore.addLocaleMarks(e,o),o==WPGlobusCoreData.default_language&&(i=e))}),n=n.length==i.length+8?i:n,c(g.id).val(n),n=""==l?i:l,c(g.wpglobus_id).val(n)},dialog:c("#wpglobus-dialog-wrapper").dialog({autoOpen:!1,width:650,modal:!0,dialogClass:"wpglobus-dialog",buttons:[{text:"Save",class:"wpglobus-button-save",click:function(){g.saveDialog(),g.dialog.dialog("close")}},{text:"Cancel",class:"wpglobus-button-cancel",click:function(){g.dialog.dialog("close")}}],open:function(){var t=g.dialogTitle;void 0!==g.attrs.maxlength&&(c(".wpglobus_dialog_textarea").attr("maxlength",g.attrs.maxlength),t+=" | maxlength="+g.attrs.maxlength),c(".wpglobus-dialog .ui-dialog-title").text(t)},close:function(){g.form[0].reset()}}),attachListener:function(){c(document).on("click",g.option.settingsClass,function(){c(".wpglobus_dialog_options_wrapper").hasClass("hidden")?c(".wpglobus_dialog_options_wrapper").removeClass("hidden"):c(".wpglobus_dialog_options_wrapper").addClass("hidden")}),c(document).on("click",".wpglobus_dialog_option",function(t){var a=c(this),e=a.data("object");g.order.action="save_post_meta_settings",g.order.post_type=WPGlobusAdmin.data.post_type,g.order.checked=a.prop("checked"),g.order.id=a.attr("id"),g.order.meta_key=a.data("meta-key"),g.ajax(g.order).done(function(t){"ok"==t.result&&("true"==t.checked?c(e).removeClass("wpglobus_dialog_start_hidden"):c(e).addClass("wpglobus_dialog_start_hidden"))}).fail(function(t){}).always(function(t,a){})}),c(document).on("click",g.option.listenClass,function(a){g.element=c(this),g.id=g.element.data("source-id"),""==g.id?(g.id=g.element.data("nodename")+'[name="'+g.element.data("source-name")+'"]',g.wpglobus_id="#wpglobus-"+g.convertToId(g.element.data("source-name"))):(g.wpglobus_id="#wpglobus-"+g.id,g.id="#"+g.id),g.clicks++,1==g.clicks&&setTimeout(function(){var t;1==g.clicks?g.onClick(a):(t=c(g.id)).hasClass("hidden")?t.removeClass("hidden").attr("style","display:block;"):t.addClass("hidden").attr("style","display:none;"),g.clicks=0},200)}),g.form=g.dialog.find("form#wpglobus-dialog-form").on("submit",function(t){t.preventDefault(),g.saveDialog()})},ajax:function(t){return c.ajax({type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusAdmin.process_ajax,order:t},dataType:"json",async:!1})},onClick:function(t){void 0===g.element.data("dialog-title")||""==g.element.data("dialog-title")?g.dialogTitle=g.option.dialogTitle:g.dialogTitle=g.element.data("dialog-title"),void 0!==g.id&&(g.attrs.maxlength=c(g.id).attr("maxlength")),g.source=g.element.data("source-value"),void 0===g.source&&(g.source=c(g.id).val(),"ajax"==g.request||(g.value=WPGlobusCore.getTranslations(g.source))),c.each(g.value,function(t,a){c("#wpglobus-dialog-"+t).val(a)}),g.dialog.dialog("open")}}}(jQuery),jQuery(document).ready(function(){"use strict";var t,r;window.WPGlobusAdminApp=(t=window.WPGlobusAdminApp||{},r=jQuery,t.App=function(t){void 0===window.WPGlobusAdminApp&&(this.config={debug:!1,version:WPGlobusAdmin.version},this.status="ok","undefined"===WPGlobusAdmin?(this.status="error",this.config.debug&&console.log("Error options loading")):this.config.debug&&console.dir(WPGlobusAdmin),this.config.disable_first_language=['<div id="disable_first_language" style="display:block;" class="redux-field-errors notice-red">',"<strong>","<span>&nbsp;</span>",WPGlobusAdmin.i18n.cannot_disable_language,"</strong>","</div>"].join(""),r.extend(this.config,t),"ok"===this.status&&this.init())},t.App.prototype={$document:r(document),init:function(){WPGlobusCoreData.multisite=this.parseBool(WPGlobusCoreData.multisite),this.admin_init(),r("#content").addClass("wpglobus-editor").attr("data-language",WPGlobusAdmin.data.default_language),r("textarea[id^=content_]").each(function(t,a){var e=r(a).attr("id").replace("content_","");r(a).attr("data-language",e)}),"post.php"===WPGlobusAdmin.page?(this.post_edit(),this.set_dialog(),"undefined"!=typeof WPGlobusAioseop&&WPGlobusAioseop.init()):"menu-edit"===WPGlobusAdmin.page?this.nav_menus():"taxonomy-edit"===WPGlobusAdmin.page?WPGlobusAdmin.data.tag_id&&this.taxonomy_edit():"taxonomy-quick-edit"===WPGlobusAdmin.page?this.quickEdit("taxonomy"):"edit.php"===WPGlobusAdmin.page?this.quickEdit("post"):"options-general.php"==WPGlobusAdmin.page?this.options_general():"widgets.php"==WPGlobusAdmin.page?(WPGlobusWidgets.init(),WPGlobusDialogApp.init({dialogTitle:"Edit text"})):"wpglobus_options"==WPGlobusAdmin.page?this.start():"wpglobusAdminCentral"==WPGlobusAdmin.page?this.adminCentral():WPGlobusDialogApp.init({customData:WPGlobusCoreData.page_custom_data})},parseBool:function(t){return!/^(false|0)$/i.test(t)&&!!t},getCurrentTab:function(){return r(".wpglobus-post-body-tabs-list .ui-tabs-active").data("language")},admin_init:function(){var t=r(".wpglobus-addons-group a").data("key");void 0!==t&&(0<=window.location.search.indexOf("page=wpglobus_options&tab="+t)?WPGlobusCoreData.multisite?window.location=WPGlobusCoreData.pluginInstallLocation.multisite:window.location=WPGlobusCoreData.pluginInstallLocation.single:(t=r("#toplevel_page_wpglobus_options li").eq(t+1),(WPGlobusCoreData.multisite?r(t).find("a").attr("href",WPGlobusCoreData.pluginInstallLocation.multisite):r(t).find("a").attr("href",WPGlobusCoreData.pluginInstallLocation.single)).attr("onclick","window.location=jQuery(this).attr('href');return false;")))},options_general:function(){var e=r("#blogname"),t=r("body");e.addClass("hidden"),r("#wpglobus-blogname").insertAfter(e).removeClass("hidden"),t.on("blur",".wpglobus-blogname",function(){r(".wpglobus-blogname").each(function(t,a){a=r(a);e.val(WPGlobusCore.getString(e.val(),a.val(),a.data("language")))})});var o=r("#blogdescription");o.addClass("hidden"),r("#wpglobus-blogdescription").insertAfter(o).removeClass("hidden"),t.on("blur",".wpglobus-blogdesc",function(){r(".wpglobus-blogdesc").each(function(t,a){a=r(a);o.val(WPGlobusCore.getString(o.val(),a.val(),a.data("language")))})})},quickEdit:function(o){var n,i,l,t;void 0!==WPGlobusAdmin.data.has_items&&WPGlobusAdmin.data.has_items&&(n="",i=0,r(document).ajaxComplete(function(t,a,e){void 0!==e.data&&""!=n&&0<=e.data.indexOf("action=inline-save-tax&")&&(r("#"+n+" a.row-title").text(WPGlobusAdmin.qedit_titles[i][WPGlobusAdmin.data.language].name),r("#"+n+" .description").text(WPGlobusAdmin.qedit_titles[i][WPGlobusAdmin.data.language].description))}),l={},r("#the-list tr").each(function(t,a){var e=r(a),a="post"===o?"post-":"tag-";i=e.attr("id").replace(a,""),l[i]={},"post"===o?l[i].source=e.find(".post_title").text():"taxonomy"===o&&(l[i].source=r("#inline_"+i+" .name").text())}),(t={action:"get_titles"}).type=o,t.taxonomy=void 0!==WPGlobusAdmin.data.taxonomy&&WPGlobusAdmin.data.taxonomy,t.title=l,r.ajax({type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusAdmin.process_ajax,order:t},dataType:"json"}).done(function(t){WPGlobusAdmin.qedit_titles=t.qedit_titles,r.each(t.bulkedit_post_titles,function(t,a){r("#inline_"+t+" .post_title").text(a[WPGlobusAdmin.data.language].name)})}).fail(function(t){}).always(function(t,a){}),r("body").on("change",".wpglobus-quick-edit-title",function(){var o="",n=[];r(".wpglobus-quick-edit-title").each(function(t,a){var e=r(a),a=e.data("language");""!==e.val()&&(o=WPGlobusCore.getString(o,e.val(),a)),WPGlobusAdmin.qedit_titles[i][a].name=e.val(),n[t]=a});var t=r(document).triggerHandler("wpglobus_get_translations",{string:o,lang:n,id:i});void 0!==t&&(o=t),r("input.ptitle").eq(0).attr("value",o),WPGlobusAdmin.qedit_titles[i].source=o}),void 0!==WPGlobusAdmin.data.tags&&r.each(WPGlobusAdmin.data.tags,function(t,a){WPGlobusAdmin.data.value[a].post_id={}}),r("button.save, input#bulk_edit").on("mouseenter",function(t){void 0!==WPGlobusAdmin.data.tags&&(("bulk_edit"==t.currentTarget.id?r("input#bulk_edit"):r("button.save")).unbind("click"),r("button.save, input#bulk_edit").on("click",function(a){console.log("Start Updating");var t=r.when(),e=(r(this),r.Deferred());e.resolve(function(t){t.next(".spinner").css({visibility:"visible"}),"bulk_edit"!=a.currentTarget.id&&r.ajaxSetup({async:!1});var o,n,i,l=t.parents("tr"),s=l.attr("id").replace("edit-","");r.each(WPGlobusAdmin.data.tags,function(t,a){if(0==(o=l.find("textarea[name='"+WPGlobusAdmin.data.names[a]+"']")).length)return!0;WPGlobusAdmin.data.value[a].post_id[s]=o.val(),n=WPGlobusAdmin.data.value[a].post_id[s].split(","),i=[];for(var e=0;e<n.length;e++)n[e]=n[e].trim(" "),""!=n[e]&&(void 0===WPGlobusAdmin.data.tag[a][n[e]]?i[e]=n[e]:i[e]=WPGlobusAdmin.data.tag[a][n[e]]);o.val(i.join(", "))})}(r(this))),t=t.then(function(){return r.when(e.done())}).then(function(){"bulk_edit"!=a.currentTarget.id&&setTimeout(function(){inlineEditPost.save(i),r.ajaxSetup({async:!0})},50)})}))}),r("#the-list").on("click","a.editinline",function(){var t=r(this);if(n=t.parents("tr").attr("id"),"post"===o)i=n.replace("post-","");else{if("taxonomy"!==o)return;i=n.replace("tag-","")}"post"===o&&void 0!==WPGlobusAdmin.data.tags&&r.each(WPGlobusAdmin.data.tags,function(t,a){var e,o;""==WPGlobusAdmin.data.value[a]||void 0!==(e=r("#edit-"+i+' textarea[name="'+WPGlobusAdmin.data.names[a]+'"]').val())&&(o=e.split(","),r.each(o,function(t,a){e=e.replace(a,WPGlobusCore.TextFilter(a,WPGlobusCoreData.language))}),r("#edit-"+i+' textarea[name="'+WPGlobusAdmin.data.names[a]+'"]').val(e))});var a=r("#edit-"+i+" input.ptitle").eq(0),t=a.parents("label");a.val(WPGlobusAdmin.qedit_titles[i].source),a.addClass("hidden"),r(WPGlobusAdmin.data.template).insertAfter(t),void 0===WPGlobusAdmin.qedit_titles[i]&&(WPGlobusAdmin.qedit_titles[i]={},WPGlobusAdmin.qedit_titles[i].source=r("#"+n+" .name a.row-title").text(),r(WPGlobusAdmin.data.enabled_languages).each(function(t,a){WPGlobusAdmin.qedit_titles[i][a]={},a==WPGlobusAdmin.data.default_language?WPGlobusAdmin.qedit_titles[i][a].name=WPGlobusAdmin.qedit_titles[i].source:WPGlobusAdmin.qedit_titles[i][a].name="",WPGlobusAdmin.qedit_titles[i][a].description=""})),r(".wpglobus-quick-edit-title").each(function(t,a){var e=r(a),a=e.data("language");e.attr("id",a+i),void 0!==WPGlobusAdmin.qedit_titles[i][a]&&(WPGlobusAdmin.qedit_titles[i][a].name=WPGlobusAdmin.qedit_titles[i][a].name.replace(/\\\'/g,"'"),WPGlobusAdmin.qedit_titles[i][a].name=WPGlobusAdmin.qedit_titles[i][a].name.replace(/\\\"/g,'"'),e.attr("value",WPGlobusAdmin.qedit_titles[i][a].name),WPGlobusAdmin.qedit_titles[i].source=WPGlobusCore.getString(WPGlobusAdmin.qedit_titles[i].source,WPGlobusAdmin.qedit_titles[i][a].name,a))}),r("input.ptitle").eq(0).attr("value",WPGlobusAdmin.qedit_titles[i].source)}))},taxonomy_edit:function(){var a=[];a[0]="name",a[1]="description";r.each(WPGlobusCoreData.enabled_languages,function(t,d){r.each(a,function(t,a){var e,o,n,i,l,s;o=d,n=r("#"+(e=a)),i=n.clone(),l=n.attr("name"),s="wpglobus-element wpglobus-element_"+e+" wpglobus-element_"+o+" wpglobus-translatable",a=(a=document.getElementById(e)).nodeName,r(i).attr("id",e+"_"+o),r(i).attr("name",l+"_"+o),o!==WPGlobusCoreData.default_language&&(s+=" hidden"),r(i).attr("class",s),r(i).attr("data-save-to",e),r(i).attr("data-language",o),"INPUT"==a?r(i).attr("value",r("#wpglobus-link-tab-"+o).data(e)):"TEXTAREA"==a&&r(i).text(r("#wpglobus-link-tab-"+o).data(e)),n.addClass("hidden"),0==r(".wpglobus-element_"+e).size()?r(i).insertAfter(n):r(i).insertAfter(r(".wpglobus-element_"+e).last())})}),r(".wpglobus-taxonomy-tabs").insertAfter("#ajax-response"),r(".wrap").tabs(),r("body").on("click",".wpglobus-taxonomy-tabs li",function(t){var a=r(this).data("language");r(".wpglobus-element").addClass("hidden"),r(".wpglobus-element_"+a).removeClass("hidden")}),r(".wpglobus-element").on("change",function(){var o=r(this).data("save-to"),n="";r(".wpglobus-element").each(function(t,a){var e=r(a),a=e.val();e.data("save-to")==o&&""!==a&&(n+=WPGlobusCore.addLocaleMarks(a,e.data("language")))}),r("#"+o).val(n)})},nav_menus:function(){function e(){n!==r(i).size()&&(clearInterval(o),r(i).each(function(t,a){var o,e=r(a);e.hasClass("wpglobus-menu-item")||(o=r(a).attr("id"),r.each(["input.edit-menu-item-title","input.edit-menu-item-attr-title"],function(t,a){var e=r("#"+o+" "+a),a=r(e);a.hasClass("wpglobus-hidden")||(a.addClass("wpglobus-hidden"),a.css("display","none"),e=a.parent("label"),a=a.parents("p"),r(a).css("height","80px"),r(e).append('<div style="color:#f00;">'+WPGlobusAdmin.i18n.save_nav_menu+"</div>"))}),e.addClass("wpglobus-menu-item"))}))}var o,n,i="#menu-to-edit .menu-item";r.ajaxSetup({beforeSend:function(t,a){void 0!==a.data&&0<=a.data.indexOf("action=add-menu-item")&&(n=r(i).size(),o=setInterval(e,500))}}),r(i).each(function(t,a){var e=r(a).attr("id"),u=e.replace("menu-item-","");r.each(["input.edit-menu-item-title","input.edit-menu-item-attr-title"],function(n,i){var l=r("#"+e+" "+i);l.val()!=WPGlobusAdmin.data.items[u][i].source&&l.val(WPGlobusAdmin.data.items[u][i].source);var s=r("#"+e+" "+i).parents("p"),d=0;r.each(WPGlobusAdmin.data.open_languages,function(t,a){var e=l.clone();e.attr("id",l.attr("id")+"-"+a),e.attr("name",l.attr("id")+"-"+a),e.attr("data-language",a),e.attr("data-item-id",u),e.attr("placeholder",WPGlobusAdmin.data.en_language_name[a]);var o=WPGlobusAdmin.data.items[u][a][i].class;0===n&&a===WPGlobusAdmin.data.default_language?e.attr("class",o+" edit-menu-item-title"):e.attr("class",o),""!=WPGlobusAdmin.data.items[u][a][i].caption?e.attr("value",WPGlobusAdmin.data.items[u][a][i].caption):e.attr("value",""),e.css("margin-bottom","0.6em"),r(s).append(e),d=t}),d=40*(d+1),l.css("display","none").attr("class","").addClass("widefat wpglobus-hidden"),r(s).css("height",d+"px").addClass("wpglobus-menu-item-box")}),r(a).addClass("wpglobus-menu-item")}),r(".menus-move-left, .menus-move-right").each(function(t,a){var e,o=r(a),n=(o.parents("li").attr("id").replace("menu-item-",""),o.attr("title"));void 0!==n&&r.each(WPGlobusAdmin.data.post_titles,function(t,a){0<=n.indexOf(t)&&(e=n.replace(t,a),o.attr("title",e),o.text(e))})}),r(".edit-menu-item-title").trigger("change"),wpNavMenu.refreshAdvancedAccessibility(),wpNavMenu.menusChanged=!1,r(".wpglobus-menu-item").on("change",function(){var t,a,e=r(this),o=e.data("item-id");e.hasClass("wpglobus-item-title")&&(t=WPGlobusCore.getString(r("input#edit-menu-item-title-"+o).val(),e.val(),e.data("language")),void 0!==(a=r(document).triggerHandler("wpglobus_get_menu_translations",{string:t,lang:WPGlobusCoreData.open_languages,id:o,type:"input.edit-menu-item-title"}))&&(t=a),r("input#edit-menu-item-title-"+o).val(t)),e.hasClass("wpglobus-item-attr")&&(t=WPGlobusCore.getString(r("input#edit-menu-item-attr-title-"+o).val(),e.val(),e.data("language")),void 0!==(a=r(document).triggerHandler("wpglobus_get_menu_translations",{string:t,lang:WPGlobusCoreData.open_languages,id:o,type:"input.edit-menu-item-attr-title"}))&&(t=a),r("input#edit-menu-item-attr-title-"+o).val(t))})},post_edit:function(){r(document).on("heartbeat-send",function(t,o){void 0!==o.wp_autosave&&(o.wpglobus_heartbeat="wpglobus",r.each(WPGlobusAdmin.data.open_languages,function(t,a){var e=r("#title_"+a).val()||"";""!=(e=r.trim(e))&&(o.wp_autosave["post_title_"+a]=e),e=r("#content_"+a).val()||"",""!=(e=r.trim(e))&&(o.wp_autosave["content_"+a]=e)}))});var a,i,o,t,n,e,l,s="#postdivrich",d=!0,u="#post-body-content";!1===WPGlobusAdmin.data.support.editor&&(d=!(s="#titlediv")),!1===WPGlobusAdmin.data.support.title&&(d=!1),r(u).prepend(r(".wpglobus-post-body-tabs-list")),r.each(WPGlobusAdmin.tabs,function(t,a){"default"===a?(r(s).wrap('<div id="tab-default"></div>'),d&&r(r("#titlediv")).insertBefore(s)):(r(s+"-"+a).wrap('<div id="tab-'+a+'"></div>'),d&&r(r("#titlediv-"+a)).insertBefore(s+"-"+a))}),r(u).addClass("wpglobus-post-body-tabs").tabs({beforeActivate:function(t,a){var e=a.oldTab[0].id.replace("link-tab-",""),a=a.newTab[0].id.replace("link-tab-","");"default"==e&&(e=WPGlobusCoreData.default_language),"default"==a&&(a=WPGlobusCoreData.default_language);a=r(document).triggerHandler("wpglobus_post_body_tabs",[e,a]);return!(!a&&void 0!==a)}}),r("#title").val(WPGlobusAdmin.title),r("#content").text(WPGlobusAdmin.content),"undefined"!=typeof WPGlobusVendor&&WPGlobusVendor.vendor.WPSEO&&("undefined"!=typeof wpglobus_wpseo?wpglobus_wpseo():"undefined"!=typeof WPGlobusYoastSeo&&WPGlobusYoastSeo.init()),WPGlobusAdmin.data.modify_excerpt&&((a=r("#excerpt")).addClass("hidden").css({display:"none"}),r(WPGlobusAdmin.data.template).insertAfter(a),r("body").on("change",".wpglobus-excerpt",function(){var t=r(this);a.val(WPGlobusCore.getString(a.val(),t.val(),t.data("language")))})),void 0!==wp.utils&&void 0!==wp.utils.WordCounter&&(WPGlobusCoreData.wordCounter={},i=this,r.each(WPGlobusCoreData.enabled_languages,function(t,a){return a==WPGlobusCoreData.default_language||(e=jQuery,o=new wp.utils.WordCounter,n=a,WPGlobusCoreData.wordCounter[n]={},WPGlobusCoreData.wordCounter[n].counter=o,void e(function(){function o(t){var a;"object"==typeof t&&(t="tinymce"==t?i.getCurrentTab():t.target.id.replace("content_","")),void 0!==WPGlobusCoreData.wordCounter[t]&&(a=!WPGlobusCoreData.wordCounter[t].contentEditor||WPGlobusCoreData.wordCounter[t].contentEditor.isHidden()?WPGlobusCoreData.wordCounter[t].content.val():WPGlobusCoreData.wordCounter[t].contentEditor.getContent({format:"raw"}),(a=WPGlobusCoreData.wordCounter[t].counter.count(a))!==WPGlobusCoreData.wordCounter[t].prevCount&&WPGlobusCoreData.wordCounter[t].count.text(a),WPGlobusCoreData.wordCounter[t].prevCount=a)}WPGlobusCoreData.wordCounter[n].content=e("#content_"+n),WPGlobusCoreData.wordCounter[n].count=e("#wp-word-count-"+n).find(".word-count-"+n),WPGlobusCoreData.wordCounter[n].prevCount=0,e(document).on("tinymce-editor-init",function(t,a){var e;-1!=a.id.indexOf("content_")&&(e=a.id.replace("content_",""),(WPGlobusCoreData.wordCounter[e].contentEditor=a).on("nodechange keyup",_.debounce(o,1e3)))}),WPGlobusCoreData.wordCounter[n].content.on("input keyup",_.debounce(o,1e3)),o(n)}));var e,o,n})),"undefined"!=typeof wpWordCount&&(o=0,t=WPGlobusCoreData.open_languages,n=this.$document,e={},t.shift(),r.each(WPGlobusCoreData.open_languages,function(t,a){e[a]=0}),l={settings:{strip:/<[a-zA-Z\/][^<>]*>/g,clean:/[0-9.(),;:!?%#$¿'"_+=\\/-]+/g,w:/\S\s+/g,c:/\S/g},block:e,wc:function(t,a,e){var o=this,n=0,i=a==WPGlobusCoreData.default_language?r(".word-count"):r(".word-count-"+a);"w"!==(e=void 0===e?wordCountL10n.type:e)&&"c"!==e&&(e="w"),o.block[a]||(o.block[a]=1,setTimeout(function(){t&&(t=(t=t.replace(o.settings.strip," ").replace(/&nbsp;|&#160;/gi," ")).replace(o.settings.clean,"")).replace(o.settings[e],function(){n++}),i.html(n.toString()),setTimeout(function(){o.block[a]=0},2e3)},1))}},n.bind("wpglobuscountwords",function(t,a,e){l.wc(a,e)}),r.each(t,function(t,a){var e=r("#content_"+a);n.triggerHandler("wpglobuscountwords",[e.val(),a]),e.keyup(function(t){t=t.keyCode||t.charCode;return t==o||(13!=t&&8!=o&&46!=o||n.triggerHandler("wpglobuscountwords",[e.val(),a]),o=t),!0})}),r(document).triggerHandler("wpglobuscountwords",[r("#content").val(),WPGlobusCoreData.default_language])),r("body").on("click","#publish, #save-post",function(){var e,t,o,n;1<WPGlobusAdmin.data.open_languages.length&&(r(document).triggerHandler("wpglobus_before_save_post",{content_tabs_id:u}),e=r("#title").val(),n=o="",0==e.length&&(t=WPGlobusAdmin.data.open_languages.indexOf(WPGlobusAdmin.data.default_language),WPGlobusAdmin.data.open_languages.splice(t,1),r(WPGlobusAdmin.data.open_languages).each(function(t,a){n=0==t?"":"-",0<(e=r("#title_"+a).val()).length&&(0==o.length&&(n=""),o=o+n+e)})),0<o.length&&r("#title").val(o)),void 0===WPGlobusAdmin.data.tagsdiv||WPGlobusAdmin.data.tagsdiv.length<1||r(WPGlobusAdmin.data.tagsdiv).each(function(t,a){if(0==r("#"+a).size())return!0;var e=a.replace("tagsdiv-","");if("undefined"===e)return!0;if(0==r("#tax-input-"+e).size())return!0;var o,n=[];r("#tagsdiv-"+e+" .tagchecklist span").each(function(t,a){o=(o=r(a).text()).replace("X","").trim(" "),void 0===WPGlobusAdmin.data.tag[e][o]?n[t]=o:n[t]=WPGlobusAdmin.data.tag[e][o]}),r("#tax-input-"+e).val(n.join(", "))})}),r(".ui-state-default").on("click",function(){"link-tab-default"===r(this).attr("id")&&(r(window).scrollTop(r(window).scrollTop()+1),r(window).scrollTop(r(window).scrollTop()-1))})},adminCentral:function(){r(".wpglobus-admin-central-tab").css({display:"none"}),1<r(".nav-tab-active").length&&r(".wpglobus-about-wrap .nav-tab-wrapper a").removeClass("nav-tab-active");var e=!0;0==location.hash.indexOf("#")&&r(".wpglobus-about-wrap .nav-tab-wrapper a").each(function(t,a){r(a).attr("href")==location.hash&&(e=!1,r(a).addClass("nav-tab-active"))}),e&&r(".wpglobus-about-wrap .nav-tab-wrapper a").eq(0).addClass("nav-tab-active");var t=r(".wpglobus-about-wrap .nav-tab-active").data("tab-id");""!=t&&r("#"+t).css({display:"block"}),r(document).on("click",".wpglobus-about-wrap .nav-tab",function(t){var a=r(this);a.hasClass("nav-tab-active")||(r(".wpglobus-admin-central-tab").css({display:"none"}),r(".wpglobus-about-wrap .nav-tab").removeClass("nav-tab-active"),a.addClass("nav-tab-active"),""!=a.data("tab-id")&&r("#"+a.data("tab-id")).css({display:"block"}))})},start:function(){var a=this;r("#wpglobus_flags").select2({formatResult:this.format,formatSelection:this.format,minimumResultsForSearch:-1,escapeMarkup:function(t){return t}}),r("body").on("click","#enabled_languages-list li:first input",function(t){return t.preventDefault(),r(".redux-save-warn").css({display:"none"}),r("#enabled_languages-list").find("li:first > input").val("1"),0===r("#disable_first_language").length&&r(a.config.disable_first_language).insertAfter("#info_bar"),!1})},format:function(t){return'<img class="wpglobus_flag" src="'+WPGlobusAdmin.flag_url+t.text+'"/>&nbsp;&nbsp;'+t.text},set_dialog:function(){var o,a,n;void 0!==WPGlobusAdmin.data.customFieldsEnabled&&(WPGlobusAdmin.data.customFieldsEnabled=this.parseBool(WPGlobusAdmin.data.customFieldsEnabled),!WPGlobusAdmin.data.customFieldsEnabled)||(a=!1,(n=function(t){var l,s,d="wpglobus_dialog_start wpglobus_dialog_icon",u=['<div class="wpglobus_dialog_options_wrapper hidden">','<input style="width:initial;" id="wpglobus-cb-{{id}}" data-object="#wpglobus-dialog-start-{{id}}" data-meta-key="{{meta-key}}" class="wpglobus_dialog_option wpglobus_dialog_cb" type="checkbox" {{checked}} />',"</div>"].join(""),t=void 0===t?"#the-list tr":"#the-list tr#"+t;r(t).each(function(){var t,a,e=r(this),o=e.attr("id"),n=e.find("textarea"),i=d;if(void 0===(l=n.attr("id")))return!0;a=r("#"+o+"-key").val(),t=r("#"+l).clone(),r(n).addClass("wpglobus-dialog-field-source hidden"),o=n.attr("name"),r(t).attr("id","wpglobus-"+l),r(t).attr("name","wpglobus-"+o),r(t).attr("data-source-id",l),r(t).attr("class","wpglobus-dialog-field"),r(t).val(WPGlobusCore.TextFilter(r(n).val(),WPGlobusCoreData.language)),r(t).insertAfter(n),s=(s=u.replace(/{{id}}/g,l)).replace(/{{meta-key}}/g,a),void 0===WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type]?s=s.replace(/{{checked}}/,"checked"):i=void 0!==WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type][a]&&"false"==WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type][a]?(s=s.replace(/{{checked}}/,""),d+" wpglobus_dialog_start_hidden"):(s=s.replace(/{{checked}}/,"checked"),d),e.append('<td style="width:20px;"><div id="wpglobus-dialog-start-'+l+'" data-type="control" data-source-type="textarea" data-source-id="'+l+'" class="'+i+'"></div>'+s+"</td>")}),!a&&0<r("#list-table .wpglobus_dialog_start").length&&(r("#list-table thead tr").append('<th class="wpglobus-control-head"><div class="wpglobus_dialog_settings wpglobus_dialog_icon"></div></th>'),a=!0)})(),r("body").on("change",".wpglobus-dialog-field",function(){var e,o,n=r(this),t="#"+n.data("source-id"),i="";e=r(t).val(),/(\{:|\[:|<!--:)[a-z]{2}/.test(e)?(r.each(WPGlobusCoreData.enabled_languages,function(t,a){""!=(o=a==WPGlobusCoreData.language?n.val():WPGlobusCore.TextFilter(e,a,"RETURN_EMPTY"))&&(i+=WPGlobusCore.addLocaleMarks(o,a))}),r(t).val(i)):r(t).val(n.val())}),r(document).ajaxSend(function(t,a,e){"add-meta"==e.action&&(o=e.element)}),r(document).ajaxComplete(function(t,a,e){"add-meta"==e.action&&void 0!==a.responseXML&&n("newmeta"==o?"meta-"+r(a.responseXML.documentElement.outerHTML).find("meta").attr("id"):o)}),WPGlobusDialogApp.init({dialogTitle:"Edit meta"}))}},new t.App,t)});