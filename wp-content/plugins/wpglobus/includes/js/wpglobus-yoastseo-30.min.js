var WPGlobusYoastSeo;jQuery(document).ready(function(r){"use strict";var p,s,e;"undefined"!=typeof wpseoReplaceVarsL10n&&"undefined"!=typeof WPGlobusCoreData&&("edit-tags.php"==WPGlobusVendor.pagenow?(s=WPGlobusYoastSeo={editorIDs:["description"],editor:{},submitId:"#submit",preventChangeEditor:!1,observer:null,init:function(){s.attachListeners(),_.delay(s.start,1500)},submit:function(e){"mouseenter"===e.type?r.each(s.editor,function(e,t){!s.editor[e].contentEditor||s.editor[e].contentEditor.isHidden()?r("#"+e).val(s.editor[e].content):tinymce.get(e).setContent(s.editor[e].content)}):"mouseleave"===e.type?s.preventChangeEditor||(r.each(s.editor,function(e,t){!s.editor[e].contentEditor||s.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,s.getCurrentTab(),"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,s.getCurrentTab(),"RETURN_EMPTY"))}),s.preventChangeEditor=!1):"click"===e.type&&(s.preventChangeEditor=!0,"tinymce"!=getUserSetting("editor")&&setUserSetting("editor","tinymce"))},attachListeners:function(){r(".wrap").on("tabsactivate",function(e,a){r.each(s.editor,function(e,t){!s.editor[e].contentEditor||s.editor[e].contentEditor.isHidden()?r("#"+e).val(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY")):tinymce.get(e).setContent(WPGlobusCore.TextFilter(t.content,a.newTab[0].dataset.language,"RETURN_EMPTY"))})}),r(document).on("mouseenter",s.submitId,s.submit).on("mouseleave",s.submitId,s.submit).on("click",s.submitId,s.submit),r(document).on("tinymce-editor-init",function(e,t){var a;-1!=_.indexOf(s.editorIDs,t.id)&&(a=r("#"+t.id),s.editor[t.id]={},s.editor[t.id].contentEditor=t,s.editor[t.id].content=a.val(),t.setContent(WPGlobusCore.TextFilter(s.editor[t.id].content,WPGlobusCoreData.default_language,"RETURN_EMPTY")),r("#"+t.getContainer().id).find("iframe").addClass("wpglobus-translatable"),a.removeClass("hidden"),t.on("nodechange keyup",_.debounce(s.update,500)),a.on("input keyup",_.debounce(s.update,500)))})},update:function(e){var t;void 0!==e.target&&("tinymce"==(t=e.target.id)&&(t=e.target.dataset.id),void 0!==s.editor[t].contentEditor&&(e=!s.editor[t].contentEditor||s.editor[t].contentEditor.isHidden()?r("#"+t).val():s.editor[t].contentEditor.getContent({format:"raw"}),s.editor[t].content=WPGlobusCore.getString(s.editor[t].content,e,s.getCurrentTab())))},getCurrentTab:function(){return r(".wpglobus-taxonomy-tabs-list .ui-tabs-active").data("language")},start:function(){r(".wpglobus-element_description").css({display:"none"})}},WPGlobusYoastSeo.init(),e=function(){r(".wrap").on("tabsactivate",function(e,t){t.newTab[0].dataset.language==WPGlobusCoreData.default_language?r("#poststuff .inside").css({display:"block"}):r("#poststuff .inside").css({display:"none"})}),r.each(["category_description","sitedesc","sitename","tag_description","term_description","term_title"],function(e,t){wpseoReplaceVarsL10n.replace_vars[t]=WPGlobusCore.TextFilter(wpseoReplaceVarsL10n.replace_vars[t],WPGlobusCoreData.default_language)}),WPGlobusYoastSeo.observer=new MutationObserver(function(e){e.forEach(function(e){"placeholder"==e.attributeName&&(WPGlobusYoastSeo.observer.disconnect(),""==(e=r("#wpseo_focuskw")).val()&&e.attr("placeholder",WPGlobusCore.TextFilter(e.attr("placeholder"),WPGlobusCoreData.default_language)),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0}))})}),WPGlobusYoastSeo.observer.observe(document.querySelector("#wpseo_focuskw"),{attributes:!0,childList:!0,characterData:!0})},window.WPGlobusYoastSeoPlugin=new e):(s=WPGlobusYoastSeo={wpseoTabSelector:"#wpglobus-wpseo-tabs",url:"",attrs:r("#wpglobus-wpseo-attr"),iB:r("#wpseo-meta-section-content"),t:r("#wpseo-meta-section-content"),ids:"",names:"",init:function(){s.start()},initAddKeywordPopup:function(){1===r("#wpseo-add-keyword-popup").length&&r(".wpseo-add-keyword").on("click",s.addKeywordPopup)},addKeywordPopup:function(){var e=r("#wpseo-add-keyword-popup").find("h3").html();tb_show(e,"#TB_inline?width=650&height=350&inlineId=wpseo-add-keyword-popup","group"),jQuery("#TB_window").css("height",235),jQuery("#TB_window").css("width",680)},qtip:function(){r(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})},start:function(){r(s.wpseoTabSelector).tabs(),s.ids=s.attrs.data("ids"),s.names=s.attrs.data("names"),s.ids=s.ids+","+s.attrs.data("qtip"),s.ids=s.ids.split(","),s.names=s.names.split(","),r("#wpglobus-wpseo-tabs").insertBefore(s.iB),r(".wpseo-metabox-tabs").css({height:"26px"}),r(".wpglobus-wpseo-general").each(function(e,t){var a=r(t),o=a.data("language"),t="wpseo-meta-section-content_"+o;a.html('<div id="'+t+'" class="wpseo-meta-section wpglobus-wpseo-meta-section" style="width:100%" data-language="'+o+'">'+s.t.html()+"</div>"),r("#"+t+" .wpseo-metabox-tabs").attr("id","wpseo-metabox-tabs_"+o),r("#"+t+" .wpseotab").attr("id","wpseo_content_"+o),r("#"+t).css({display:"block"}),r("#wpseo_meta").css({overflow:"hidden"}),r("#"+t+" .snippet_container").addClass("wpglobus-snippet_container"),o!==WPGlobusCoreData.default_language&&r("#"+t+" .wpseo-add-keyword").addClass("hidden"),r.each(s.names,function(e,t){r("#"+t).attr("name",t+"_"+o)}),r.each(s.ids,function(e,t){var a=r("#"+t);"wpseosnippet"==t&&a.addClass("wpglobus-wpseosnippet"),"snippet_title"==t&&a.addClass("wpglobus-snippet_title"),"snippet_meta"==t&&a.addClass("wpglobus-snippet_meta"),"snippet_cite"==t&&a.addClass("wpglobus-snippet_cite"),"snippet_citeBase"==t&&a.addClass("wpglobus-snippet_citeBase"),"yoast_wpseo_focuskw_text_input"==t&&a.addClass("wpglobus-yoast_wpseo_focuskw_text_input"),"wpseo-pageanalysis"==t&&a.addClass("wpglobus-wpseo-pageanalysis"),"snippet_preview"==t&&a.addClass("wpglobus-snippet_preview"),a.attr("id",t+"_"+o),r("#"+t+"_"+o).attr("data-language",o)});a=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),o,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input_"+o).val(a),r("#yoast_wpseo_focuskw_"+o).val(a),o!==WPGlobusCoreData.default_language&&(r("#"+t+" #yoast_wpseo_focuskw_text_input_"+o).addClass("hidden").after('<div class="wpglobus-suggest" style="font-weight:bold;">'+WPGlobusVendor.i18n.yoastseo_plus_access+"</div>"),r("#"+t+" #wpseo-pageanalysis_"+o).addClass("hidden"))}),s.iB.addClass("hidden"),s.iB.css({height:0,overflow:"hidden"});var e=WPGlobusCore.TextFilter(r("#yoast_wpseo_focuskw_text_input").val(),WPGlobusCoreData.default_language,"RETURN_EMPTY");r("#yoast_wpseo_focuskw_text_input").val(e),r("#yoast_wpseo_focuskw").val(e),r(".wpseo-metabox-sidebar .wpseo-meta-section-link").on("click",function(e){"#wpseo-meta-section-content"==r(this).attr("href")?r("#wpglobus-wpseo-tabs").css({display:"block"}):r("#wpglobus-wpseo-tabs").css({display:"none"})}),r("body").on("click",".wpglobus-post-body-tabs-list li",function(e){var t=r(this);t.hasClass("wpglobus-post-tab")&&(r("#wpglobus-wpseo-tabs").tabs("option","active",t.data("order")),t=r("#yoast_wpseo_focuskw_text_input_"+r(this).data("language")).val(),YoastSEO.app.rawData.keyword=t,r("#yoast_wpseo_focuskw_text_input").val(t),r('input[name="yoast_wpseo_focuskw"]').val(t),YoastSEO.app.analyzeTimer(YoastSEO.app))}),s.qtip(),s.initAddKeywordPopup()}},(e=function(){this.replaceVars=wpseoReplaceVarsL10n.replace_vars,this.language=WPGlobusCoreData.default_language,this.tab=WPGlobusCoreData.default_language,this.wpseoTab=WPGlobusCoreData.default_language,this.title_template=wpseoPostScraperL10n.title_template,this.focuskw=r("#yoast_wpseo_focuskw_text_input"),this.focuskw_hidden=r('input[name="yoast_wpseo_focuskw"]'),this.focuskwKeep=!1,this.post_slug="#editable-post-name-full",YoastSEO.app.registerPlugin("wpglobusYoastSeoPlugin",{status:"ready"}),YoastSEO.app.registerModification("content",this.contentModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("title",this.titleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_title",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("snippet_meta",this.snippetModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_page_title",this.pageTitleModification,"wpglobusYoastSeoPlugin",0),YoastSEO.app.registerModification("data_meta_desc",this.metaDescModification,"wpglobusYoastSeoPlugin",0),r(document).on("blur",".wpglobus-snippet_title",function(e){var t=r(this),t=WPGlobusCore.getString(r("#yoast_wpseo_title").val(),t.text(),t.data("language"));YoastSEO.app.rawData.pageTitle=t,r('input[name="yoast_wpseo_title"]').val(t),r("#snippet_title").text(t)}),r(document).on("blur",".wpglobus-snippet_meta",function(e){var t=r(this),t=WPGlobusCore.getString(r("#yoast_wpseo_metadesc").val(),t.text(),t.data("language"));r("#yoast_wpseo_metadesc").val(t),r("#snippet_meta").text(t)}),r(document).on("keyup",".wpglobus-yoast_wpseo_focuskw_text_input",function(e){var t=r(this),a=t.val();p.focuskw.val(a),p.focuskw_hidden.val(a),p.updateWpseoKeyword(a,t.data("language")),YoastSEO.app.analyzeTimer(YoastSEO.app)}),r("#publish,#save-post").on("mouseenter",function(e){var a,o="";r(".wpglobus-yoast_wpseo_focuskw_text_input").each(function(e,t){a=r(this),o=WPGlobusCore.getString(o,a.val(),a.data("language"))}),p.focuskw.val(o),p.focuskw_hidden.val(o)}).on("mouseleave",function(e){p.focuskwKeep||(p.wpseoTab=r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language"),r(this),p.focuskw.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val()),p.focuskw_hidden.val(r("#yoast_wpseo_focuskw_text_input_"+p.wpseoTab).val()))}).on("click",function(e){p.focuskwKeep=!0}),r(WPGlobusYoastSeo.wpseoTabSelector).on("tabsactivate",function(e,t){t.newPanel.attr("data-language")===WPGlobusCoreData.default_language&&(WPGlobusYoastSeo.url=r(p.post_slug).text(),t=r("#yoast_wpseo_focuskw_text_input_"+WPGlobusCoreData.default_language).val(),YoastSEO.app.rawData.keyword=t,p.focuskw.val(t),p.focuskw_hidden.val(t),YoastSEO.app.analyzeTimer(YoastSEO.app))}),p=this}).prototype.getWPseoTab=function(){return r(".wpglobus-wpseo-tabs-list .ui-tabs-active").data("language")},e.prototype.citeModification=function(e){var t="#snippet_citeBase_"+e,a="#snippet_cite_"+e,o=r("#wpseo-tab-"+e).data("yoast-cite-base");!1===r("#wpseo-tab-"+e).data("cite-contenteditable")&&r(a).attr("contenteditable","false"),r(t).text(o)},e.prototype.pageTitleModification=function(a){var o,s="#snippet_title_",i="",n="";return p.title_template==a?r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=p.replaceVariablesPlugin(a),r(s+t).text(i),t==p.getWPseoTab()&&(n=i)}):(o=WPGlobusCore.getTranslations(a),r.each(WPGlobusCoreData.enabled_languages,function(e,t){p.language=t,i=""===o[t]?p.replaceVariablesPlugin(p.title_template):o[t],r(s+t).text(i),t==p.getWPseoTab()&&(n=i)})),n},e.prototype.metaDescModification=function(a){return r.each(WPGlobusCoreData.enabled_languages,function(e,t){r("#snippet_meta_"+t).text(WPGlobusCore.TextFilter(a,t,"RETURN_EMPTY")),p.citeModification(t)}),WPGlobusCore.TextFilter(a,p.getWPseoTab(),"RETURN_EMPTY")},e.prototype.snippetModification=function(e){return WPGlobusCore.TextFilter(e,p.getWPseoTab(),"RETURN_EMPTY")},e.prototype.contentModification=function(e){return p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#content_"+p.getWPseoTab()).val()},e.prototype.titleModification=function(e){return setTimeout(p.updatePageAnalysis,1e3),p.getWPseoTab()==WPGlobusCoreData.default_language?e:r("#title_"+p.getWPseoTab()).val()},e.prototype.defaultReplace=function(e){return e.replace(/%%sitedesc%%/g,this.replaceVars.sitedesc).replace(/%%sitename%%/g,WPGlobusCore.TextFilter(this.replaceVars.sitename,this.language)).replace(/%%term_title%%/g,this.replaceVars.term_title).replace(/%%term_description%%/g,this.replaceVars.term_description).replace(/%%category_description%%/g,this.replaceVars.category_description).replace(/%%tag_description%%/g,this.replaceVars.tag_description).replace(/%%searchphrase%%/g,this.replaceVars.searchphrase).replace(/%%sep%%/g,this.replaceVars.sep).replace(/%%date%%/g,this.replaceVars.date).replace(/%%id%%/g,this.replaceVars.id).replace(/%%page%%/g,this.replaceVars.page).replace(/%%currenttime%%/g,this.replaceVars.currenttime).replace(/%%currentdate%%/g,this.replaceVars.currentdate).replace(/%%currentday%%/g,this.replaceVars.currentday).replace(/%%currentmonth%%/g,this.replaceVars.currentmonth).replace(/%%currentyear%%/g,this.replaceVars.currentyear).replace(/%%focuskw%%/g,YoastSEO.app.stringHelper.stripAllTags(YoastSEO.app.rawData.keyword))},e.prototype.replaceVariablesPlugin=function(e){return void 0!==e&&(e=this.titleReplace(e),e=this.defaultReplace(e),e=this.doubleSepReplace(e)),e},e.prototype.titleReplace=function(e){var t="";return void 0===(t=(this.language==WPGlobusCoreData.default_language?r("#title"):r("#title_"+this.language)).val())&&(t=YoastSEO.app.rawData.pageTitle),e=e.replace(/%%title%%/g,t)},e.prototype.doubleSepReplace=function(e){var t=YoastSEO.app.stringHelper.addEscapeChars(this.replaceVars.sep),t=new RegExp(t+" "+t,"g");return e=e.replace(t,this.replaceVars.sep)},e.prototype.updateWpseoKeyword=function(e,t){t!=WPGlobusCoreData.default_language&&(1==r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").length&&r("#wpseo-meta-section-content_"+t+" .wpseo_keyword").removeClass("wpseo_keyword").addClass("wpglobus-wpseo_keyword_"+t),r(".wpglobus-wpseo_keyword_"+t).text(e))},e.prototype.updatePageAnalysis=function(){r("#wpseo-pageanalysis_"+p.getWPseoTab()).html(r("#wpseo-pageanalysis").html())},window.WPGlobusYoastSeoPlugin=new e,YoastSEO.Analyzer.prototype.urlKeyword=function(){var e=[{test:"urlKeyword",result:0}];return void 0!==WPGlobusYoastSeo&&""!==WPGlobusYoastSeo.url&&(this.config.url=WPGlobusYoastSeo.url),void 0!==this.config.url&&(e[0].result=this.stringHelper.countMatches(this.config.url,this.keywordRegexInverse)),e}))});