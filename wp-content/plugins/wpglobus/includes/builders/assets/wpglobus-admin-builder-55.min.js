var WPGlobusCore;!function(l){var s=WPGlobusCore={strpos:function(t,e,a){a=(t=""+t).indexOf(e,a);return 0<=a&&a},TextFilter:function(t,e,a){if(void 0===t||""===t)return t;var o,n,l=[],i=!1;e=""==e?"en":e,a=void 0===a||""==a?"RETURN_IN_DEFAULT_LANGUAGE":a,l[0]=[],l[0].start=WPGlobusCoreData.locale_tag_start.replace("%s",e),l[0].end=WPGlobusCoreData.locale_tag_end,l[1]=[],l[1].start="\x3c!--:"+e+"--\x3e",l[1].end="\x3c!--:--\x3e",l[2]=[],l[2].start="[:"+e+"]",l[2].end="[:";for(var u=0;u<3;u++)if(!1!==(o=s.strpos(t,l[u].start))){o+=l[u].start.length,t=!1===(n=s.strpos(t,l[u].end,o))?t.substr(o):t.substr(o,n-o),i=!0;break}return i||("RETURN_EMPTY"==a?e==WPGlobusCoreData.default_language&&!/(\{:|\[:|<!--:)[a-z]{2}/.test(t)||(t=""):e==WPGlobusCoreData.default_language?/(\{:|\[:|<!--:)[a-z]{2}/.test(t)&&(t=""):t=s.TextFilter(t,WPGlobusCoreData.default_language)),t},addLocaleMarks:function(t,e){return WPGlobusCoreData.locale_tag_start.replace("%s",e)+t+WPGlobusCoreData.locale_tag_end},getTranslations:function(a){var o,n={};return l.each(WPGlobusCoreData.enabled_languages,function(t,e){o=e==WPGlobusCoreData.default_language?"RETURN_IN_DEFAULT_LANGUAGE":"RETURN_EMPTY",n[e]=s.TextFilter(a,e,o)}),n},getString:function(t,e,a){if(void 0===t)return t;void 0===e&&(e=""),void 0===a&&(a=WPGlobusCoreData.language),(t=s.getTranslations(t))[a]=e;var o="";return l.each(t,function(t,e){""!=e&&t!=WPGlobusCoreData.default_language&&(o+=s.addLocaleMarks(e,t))}),o=""!=t[WPGlobusCoreData.default_language]?""==o?t[WPGlobusCoreData.default_language]:s.addLocaleMarks(t[WPGlobusCoreData.default_language],WPGlobusCoreData.default_language)+o:o}}}(jQuery),jQuery(document).ready(function(n){"use strict";var l;"undefined"!=typeof WPGlobusAdmin&&(l={languageSelectorBoxDelta:0,locationPathname:"/wp-admin/post.php",init:function(){"taxonomy-edit"===WPGlobusAdmin.page?l.taxonomyEdit():l.start()},_info:function(){var t=void 0;0<n("#language").length&&(t=n("#language").val()),console.log("Current language from hidden (#language) : ",t),t=void 0,0<n("#wpglobus-language").length&&(t=n("#wpglobus-language").val()),console.log("Current language from hidden (#wpglobus-language) : ",t),t=void 0,0<n('input[name="wpglobus-language"]').length&&(t=n('input[name="wpglobus-language"]').val()),console.log('Current language from hidden (input[name="wpglobus-language"]) : ',t),t=void 0,0<n('input[name="wpglobus_language"]').length&&(t=n('input[name="wpglobus_language"]').val()),console.log('Current language from hidden (input[name="wpglobus_language"]) : ',t),console.log("Builder : ",WPGlobusAdmin.builder);t=n("#content").val();""==t?console.log("Editor content (#content) : (empty)"):console.log(t)},checkCookie:function(){if(-1!=window.location.search.indexOf("language="))return!1;if("post.php"==WPGlobusAdmin.page&&(null!==(e=wpCookies.get(WPGlobusAdmin.builder.languageCookie))&&history.pushState)){var t=(e=e.split("+"))[0];if(void 0!==e[1]&&e[1]+0==WPGlobusAdmin.$_get.post){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&language="+t;return window.history.pushState({path:e},"",e),t}}return!1},setCookie:function(){var t=l.checkCookie();t||void 0===(t=WPGlobusAdmin.$_get.language)&&(t=WPGlobusAdmin.data.default_language),wpCookies.set(WPGlobusAdmin.builder.languageCookie,t+"+"+WPGlobusAdmin.$_get.post,31536e3,l.locationPathname)},setLocationSearch:function(){var t;history.pushState&&-1==window.location.search.indexOf("language=")&&WPGlobusAdmin.data.default_language!=WPGlobusAdmin.currentTab&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&language="+WPGlobusAdmin.currentTab,window.history.pushState({path:t},"",t))},taxonomyEdit:function(){n(".wpglobus-taxonomy-tabs").insertAfter("#ajax-response"),n(".wrap").tabs(),n(WPGlobusAdmin.data.multilingualSlug.title).insertAfter(".term-slug-wrap th label"),WPGlobusAdmin.currentTab!==WPGlobusAdmin.data.default_language&&(n(".wpglobus-tax-edit-tab").removeClass("ui-tabs-active ui-state-active"),n("#wpglobus-link-tab-"+WPGlobusAdmin.currentTab).addClass("ui-tabs-active ui-state-active")),n(document).on("click",".wpglobus-tax-edit-tab a",function(t){t.preventDefault();t=n(this).data("href");location.href=t}),l.setMultilingualFields(),n(document).on("tinymce-editor-init",function(t,e){n("#"+e.getContainer().id).find("iframe").addClass(WPGlobusAdmin.builder.translatableClass).css({width:""})})},start:function(){l.setLocationSearch();var a="#postdivrich",o=!0,t="#post-body-content";!1===WPGlobusAdmin.data.support.editor&&(o=!(a="#titlediv")),!1===WPGlobusAdmin.data.support.title&&(o=!1),n(t).prepend(n(".wpglobus-post-body-tabs-list")),n.each(WPGlobusAdmin.tabs,function(t,e){"default"===e?(n(a).wrap('<div id="tab-default"></div>'),o&&n(n("#titlediv")).insertBefore(a)):(n(a+"-"+e).wrap('<div id="tab-'+e+'"></div>'),o&&n(n("#titlediv-"+e)).insertBefore(a+"-"+e))}),n(t).addClass("wpglobus-post-body-tabs"),l.setMultilingualFields(),"post.php"===WPGlobusAdmin.page&&this.postEdit()},postEdit:function(){n(document).triggerHandler("wpglobus_after_post_edit")},ajaxPrefilter:function(){n.ajaxPrefilter(function(t,e,a){})},setMultilingualFields:function(){n.each(WPGlobusAdmin.builder.multilingualFields,function(t,e){e=l.getFieldAttrs(e);"function"==typeof WPGlobusAdmin[e.fieldFunction]&&WPGlobusAdmin[e.fieldFunction](e)})},textField:function(t){var e=t.id,a="name",t=document.getElementsByName(e);if(0==t.length&&(a="id",t=document.getElementById(e)),null===t)return!0;("id"==a?n("#"+e):(t=(t=t[0].nodeName).toLowerCase(),n(t+'[name="'+e+'"]'))).addClass(WPGlobusAdmin.builder.translatableClass)},wysiwygField:function(a){n(document).on("wpglobus_wysiwyg_field",function(t,e){e.callback(a)})},fileField:function(t){},getFieldAttrs:function(t){var e={};return"string"==typeof t?e.id=t:"object"==typeof t&&(void 0!==t.id&&(e.id=t.id),void 0!==t.type&&(e.type=t.type,e.fieldFunction=t.type+"Field")),n.extend({},{id:!1,type:"text",fieldFunction:"textField"},e)}},(WPGlobusAdmin=n.extend({},WPGlobusAdmin,l)).init())});