var WPGlobusCore;!function(l){var s=WPGlobusCore={strpos:function(a,t,e){e=(a=""+a).indexOf(t,e);return 0<=e&&e},TextFilter:function(a,t,e){if(void 0===a||""===a)return a;var o,n,l=[],i=!1;t=""==t?"en":t,e=void 0===e||""==e?"RETURN_IN_DEFAULT_LANGUAGE":e,l[0]=[],l[0].start=WPGlobusCoreData.locale_tag_start.replace("%s",t),l[0].end=WPGlobusCoreData.locale_tag_end,l[1]=[],l[1].start="\x3c!--:"+t+"--\x3e",l[1].end="\x3c!--:--\x3e",l[2]=[],l[2].start="[:"+t+"]",l[2].end="[:";for(var u=0;u<3;u++)if(!1!==(o=s.strpos(a,l[u].start))){o+=l[u].start.length,a=!1===(n=s.strpos(a,l[u].end,o))?a.substr(o):a.substr(o,n-o),i=!0;break}return i||("RETURN_EMPTY"==e?t==WPGlobusCoreData.default_language&&!/(\{:|\[:|<!--:)[a-z]{2}/.test(a)||(a=""):t==WPGlobusCoreData.default_language?/(\{:|\[:|<!--:)[a-z]{2}/.test(a)&&(a=""):a=s.TextFilter(a,WPGlobusCoreData.default_language)),a},addLocaleMarks:function(a,t){return WPGlobusCoreData.locale_tag_start.replace("%s",t)+a+WPGlobusCoreData.locale_tag_end},getTranslations:function(e){var o,n={};return l.each(WPGlobusCoreData.enabled_languages,function(a,t){o=t==WPGlobusCoreData.default_language?"RETURN_IN_DEFAULT_LANGUAGE":"RETURN_EMPTY",n[t]=s.TextFilter(e,t,o)}),n},getString:function(a,t,e){if(void 0===a)return a;void 0===t&&(t=""),void 0===e&&(e=WPGlobusCoreData.language),(a=s.getTranslations(a))[e]=t;var o="";return l.each(a,function(a,t){""!=t&&a!=WPGlobusCoreData.default_language&&(o+=s.addLocaleMarks(t,a))}),o=""!=a[WPGlobusCoreData.default_language]?""==o?a[WPGlobusCoreData.default_language]:s.addLocaleMarks(a[WPGlobusCoreData.default_language],WPGlobusCoreData.default_language)+o:o}}}(jQuery),jQuery(document).ready(function(n){"use strict";var t;"undefined"!=typeof WPGlobusAdmin&&(t={languageSelectorBoxDelta:0,locationPathname:"/wp-admin/post.php",init:function(){"taxonomy-edit"===WPGlobusAdmin.page?t.taxonomyEdit():t.start()},_info:function(){var a=void 0;0<n("#language").length&&(a=n("#language").val()),console.log("Current language from hidden (#language) : ",a),a=void 0,0<n("#wpglobus-language").length&&(a=n("#wpglobus-language").val()),console.log("Current language from hidden (#wpglobus-language) : ",a),a=void 0,0<n('input[name="wpglobus-language"]').length&&(a=n('input[name="wpglobus-language"]').val()),console.log('Current language from hidden (input[name="wpglobus-language"]) : ',a),a=void 0,0<n('input[name="wpglobus_language"]').length&&(a=n('input[name="wpglobus_language"]').val()),console.log('Current language from hidden (input[name="wpglobus_language"]) : ',a),console.log("Builder : ",WPGlobusAdmin.builder);a=n("#content").val();""==a?console.log("Editor content (#content) : (empty)"):console.log(a)},checkCookie:function(){if(-1!=window.location.search.indexOf("language="))return!1;if("post.php"==WPGlobusAdmin.page&&(null!==(t=wpCookies.get(WPGlobusAdmin.builder.languageCookie))&&history.pushState)){var a=(t=t.split("+"))[0];if(void 0!==t[1]&&t[1]+0==WPGlobusAdmin.$_get.post){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&language="+a;return window.history.pushState({path:t},"",t),a}}return!1},setCookie:function(){var a=t.checkCookie();a||void 0===(a=WPGlobusAdmin.$_get.language)&&(a=WPGlobusAdmin.data.default_language),wpCookies.set(WPGlobusAdmin.builder.languageCookie,a+"+"+WPGlobusAdmin.$_get.post,31536e3,t.locationPathname)},setLocationSearch:function(){var a;history.pushState&&-1==window.location.search.indexOf("language=")&&WPGlobusAdmin.data.default_language!=WPGlobusAdmin.currentTab&&(a=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search+"&language="+WPGlobusAdmin.currentTab,window.history.pushState({path:a},"",a))},taxonomyEdit:function(){n(".wpglobus-taxonomy-tabs").insertAfter("#ajax-response"),n(".wrap").tabs(),n(WPGlobusAdmin.data.multilingualSlug.title).insertAfter(".term-slug-wrap th label"),WPGlobusAdmin.currentTab!==WPGlobusAdmin.data.default_language&&(n(".wpglobus-tax-edit-tab").removeClass("ui-tabs-active ui-state-active"),n("#wpglobus-link-tab-"+WPGlobusAdmin.currentTab).addClass("ui-tabs-active ui-state-active")),n(document).on("click",".wpglobus-tax-edit-tab a",function(a){a.preventDefault();a=n(this).data("href");location.href=a}),t.setMultilingualFields(),n(document).on("tinymce-editor-init",function(a,t){n("#"+t.getContainer().id).find("iframe").addClass(WPGlobusAdmin.builder.translatableClass).css({width:""})})},start:function(){t.setLocationSearch();var e="#postdivrich",o=!0,a="#post-body-content";!1===WPGlobusAdmin.data.support.editor&&(o=!(e="#titlediv")),!1===WPGlobusAdmin.data.support.title&&(o=!1),n(a).prepend(n(".wpglobus-post-body-tabs-list")),n.each(WPGlobusAdmin.tabs,function(a,t){"default"===t?(n(e).wrap('<div id="tab-default"></div>'),o&&n(n("#titlediv")).insertBefore(e)):(n(e+"-"+t).wrap('<div id="tab-'+t+'"></div>'),o&&n(n("#titlediv-"+t)).insertBefore(e+"-"+t))}),n(a).addClass("wpglobus-post-body-tabs"),t.setMultilingualFields()},ajaxPrefilter:function(){n.ajaxPrefilter(function(a,t,e){})},setMultilingualFields:function(){n.each(WPGlobusAdmin.builder.multilingualFields,function(a,t){var e="name",o=document.getElementsByName(t);0==o.length&&(e="id",o=document.getElementById(t)),null===o||("id"==e?n("#"+t):(o=(o=o[0].nodeName).toLowerCase(),n(o+'[name="'+t+'"]'))).addClass(WPGlobusAdmin.builder.translatableClass)})}},(WPGlobusAdmin=n.extend({},WPGlobusAdmin,t)).init())});